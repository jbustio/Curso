<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Main report templates -->
    <template id="report_property_offer" t-name="report_property_offer">
        <t t-foreach="docs" t-as="property">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <!--Header-->

                        <h1>
                            <strong>Salesperson:</strong>
                            <span t-field="property.salesperson"></span>
                        </h1>
                        <h2>

                            <span t-field="property.name"></span>
                        </h2>
                        <div id="expected_price">

                            <strong>Expected Price: </strong>
                            <span t-field="property.expected_price"/>
                        </div>


                        <t t-call="real_estate.report_subtemplate">
                        </t>




                        <!--Footer-->



                    </div>
                </t>
            </t>
        </t>
    </template>

    <template id="report_users_properties">
        <t t-foreach="docs" t-as="person">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                                Header
                        
                        <h1>
                            <strong>Salesperson:</strong>
                            <span t-field="person.name"></span>
                        </h1>

                        <t t-foreach="person.property_ids" t-as="property">
                            <h2>
                                <span t-field="property.name"></span>
                            </h2>
                            <div>

                                <strong>Expected Price: </strong>
                                <span t-field="property.expected_price"/>
                            </div>

                            <t t-call="real_estate.report_subtemplate"/>

                        </t>
                    </div>
                </t>
            </t>
        </t>
    </template>


    <template id="report_subtemplate">


        <div>
            <strong>Status: </strong>
            <span t-field="property.state"/>
        </div>


        <table>
            <thead>
                <tr class="border-bottom">
                    <th class="m-3 p-2 text-center">Price</th>
                    <th class="m-3 p-2 text-center">Partner </th>
                    <th class="m-3 p-2 text-center">Validity(days)</th>
                    <th class="m-3 p-2 text-center">Deadline</th>
                    <th class="m-3 p-2 text-center">State</th>
                </tr>
            </thead>
            <tbody>
                <t t-if="len(property.mapped('offer')) > 0">
                    <tr class="border-bottom text-center" t-foreach="property.offer" t-as="offer">
                        <td>
                            <span class="m-3 p-2 text-center" t-field="offer.price"></span>
                        </td>
                        <td>
                            <span class="m-3 p-2 text-center" t-field="offer.partner_id"></span>
                        </td>
                        <td>
                            <span class="m-3 p-2 text-center" t-field="offer.validity"></span>
                        </td>
                        <td>
                            <span class="m-3 p-2 text-center" t-field="offer.date_deadline"></span>
                        </td>
                        <td>
                            <span class="m-3 p-2 text-center" t-field="offer.status"></span>
                        </td>
                    </tr>
                </t>
                <t t-else="">!!!This property has not offers</t>
            </tbody>
        </table>

    </template>
    <!--
        <template>
            <xpath expr="//div[@id="id_snippet_structure"]" position="inside">
                <t t-snippet="my_model.id_snippet" t-thumnail="/static/src/.png"/>
            </xpath>
        </template>
        -->
</odoo>